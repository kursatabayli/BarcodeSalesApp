@page "/edit-stock/{id:long}"
@using BarcodeSalesApp.App.Resources.Strings

<EditForm Model="StockModel" OnValidSubmit="UpdateStockAsync">
  <DataAnnotationsValidator />
  <MudGrid Spacing="4" Justify="Justify.Center">
    <MudItem xs="12" sm="8" md="6" lg="4">
      <MudItem Class="mb-5">
        <MudText Typo="Typo.h5" Class="d-flex align-center">
          <MudIcon Icon="@Icons.Material.Filled.Warehouse" Class="mr-2" />
          @Localizer[AppStrings.StockUpdate] - @StockModel?.Name
        </MudText>
      </MudItem>

      <MudItem Class="mb-4">
        <MudText Typo="Typo.body1">
          <MudIcon Icon="@Icons.Material.Filled.Inventory" Class="mr-2" />
          <strong>@Localizer[AppStrings.UnitsPerCase] :</strong> @StockModel?.UnitsPerCase
        </MudText>
      </MudItem>

      <MudItem Class="mb-4">
        <MudRadioGroup @bind-Value="isUpdateByBox">
          <MudRadio Value="true">@Localizer["UpdateByBox"]</MudRadio>
          <MudRadio Value="false">@Localizer["SetTotalQuantity"]</MudRadio>
        </MudRadioGroup>
      </MudItem>

      <MudItem Class="mb-4">
        <MudNumericField Label="@Localizer[AppStrings.IncomingBoxAmount]" @bind-Value="NewStockUnit"
          Variant="Variant.Outlined" Margin="Margin.Dense" FullWidth HideSpinButtons="true"
          Disabled="@(!isUpdateByBox)" />
      </MudItem>

      <MudItem Class="mb-4">
        <MudNumericField Label="@Localizer[AppStrings.TotalStockQuantity]" @bind-Value="StockModel.QuantityInStock"
          Variant="Variant.Outlined" Margin="Margin.Dense" FullWidth HideSpinButtons="true"
          Disabled="@(isUpdateByBox)" />
      </MudItem>

    </MudItem>
  </MudGrid>
  <MudStack Row="true" Spacing="4" Justify="Justify.Center" Class="mt-6">
    <MudItem>
      <MudButton OnClick='() => NavigateTo($"/product-detail/{Id}")' Color="Color.Secondary" Variant="Variant.Outlined"
        EndIcon="@Icons.Material.Filled.ArrowBack">
        @Localizer[AppStrings.Back]
      </MudButton>
    </MudItem>
    <MudItem>
      <MudButton Variant="Variant.Filled" Color="Color.Success" ButtonType="ButtonType.Submit"
        EndIcon="@Icons.Material.Filled.Save">
        @Localizer[AppStrings.Update]
      </MudButton>
    </MudItem>
  </MudStack>
</EditForm>